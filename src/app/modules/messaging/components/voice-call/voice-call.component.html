<p-dialog
  [visible]="showCallDialog"
  [modal]="true"
  [closable]="false"
  [style]="{width: '360px'}"
  styleClass="voice-call-dialog"
  [showHeader]="false">
  <div class="call-dialog">
    <!-- Calling State -->
    <div *ngIf="callStatus.status === 'calling'" class="call-status">
      <div class="avatar-wrapper">
        <div class="ripple"></div>
        <div class="avatar">
          <i class="pi pi-user text-6xl"></i>
        </div>
      </div>
      <div class="info">
        <h3 class="caller-name">{{callStatus?.callerName}}</h3>
        <p class="call-status-text">Calling...</p>
      </div>
      <div class="action-buttons actions">
        <button pButton icon="pi pi-times"
                class="p-button-rounded p-button-danger hang-up-btn"
                pTooltip="End Call"
                (click)="endCall()">
        </button>
      </div>
    </div>

    <!-- Incoming Call State -->
    <div *ngIf="callStatus.status === 'incoming'" class="call-status">
      <div class="avatar-wrapper incoming">
        <div class="ripple"></div>
        <div class="avatar">
          <i class="pi pi-user text-6xl"></i>
        </div>
      </div>
      <div class="info">
        <h3 class="caller-name">{{callStatus?.callerName}}</h3>
        <p class="call-status-text">Incoming call</p>
      </div>
      <div class="action-buttons actions">
        <button pButton icon="pi pi-phone"
                class="p-button-rounded p-button-success accept-btn"
                pTooltip="Accept Call"
                (click)="acceptCall()">
        </button>
        <button pButton icon="pi pi-times"
                class="p-button-rounded p-button-danger reject-btn"
                pTooltip="Reject Call"
                (click)="rejectCall()">
        </button>
      </div>
    </div>

    <!-- Connected State -->
    <div *ngIf="callStatus.status === 'connected'" class="call-status">
      <div class="avatar-wrapper connected">
        <div class="avatar">
          <i class="pi pi-user text-6xl"></i>
        </div>
        <div class="wave-container audio-waves">
          <div class="wave-visualization">
            <div class="wave"></div>
            <div class="wave"></div>
            <div class="wave"></div>
          </div>
        </div>
      </div>
      <div class="info call-info">
        <h3 class="caller-name">{{callStatus?.callerName}}</h3>
        <div class="call-timer timer">{{callDuration$ | async}}</div>
      </div>
      <div class="action-buttons actions">
        <button pButton icon="pi pi-volume-up"
                class="p-button-rounded p-button-secondary volume-btn"
                pTooltip="Volume">
        </button>
        <button pButton icon="pi pi-microphone"
                class="p-button-rounded p-button-secondary mic-btn"
                pTooltip="Microphone">
        </button>
        <button pButton icon="pi pi-times"
                class="p-button-rounded p-button-danger hang-up-btn"
                pTooltip="End Call"
                (click)="endCall()">
        </button>
      </div>
    </div>
  </div>
</p-dialog>
